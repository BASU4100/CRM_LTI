<div class="container">
  <!-- Success/Error Messages -->
  <!-- <div *ngIf="showMessage" class="alert alert-success">{{ responseMessage }}</div>
  <div *ngIf="showError" class="alert alert-danger">{{ errorMessage }}</div> -->

  <!-- Car Form -->
  <form [formGroup]="itemForm" (ngSubmit)="onSubmit()">
    <div class="form-group">
      <label for="make">Make</label>
      <input id="make" formControlName="make" class="form-control" [placeholder] = formModel.make
        [ngClass]="{'is-invalid': itemForm.get('make')?.invalid && itemForm.get('make')?.touched}" />
      <div *ngIf="itemForm.get('make')?.invalid && itemForm.get('make')?.touched" class="invalid-feedback">
        Make is required and must be at least 2 characters.
      </div>
    </div>

    <div class="form-group">
      <label for="model">Model</label>
      <input id="model" formControlName="model" class="form-control" [placeholder] = formModel.model
        [ngClass]="{'is-invalid': itemForm.get('model')?.invalid && itemForm.get('model')?.touched}" />
      <div *ngIf="itemForm.get('model')?.invalid && itemForm.get('model')?.touched" class="invalid-feedback">
        Model is required and must be at least 2 characters.
      </div>
    </div>

    <div class="form-group">
      <label for="status">Status</label>
      <select id="status" formControlName="status" class="form-control"
        [ngClass]="{'is-invalid':itemForm.get('status')?.invalid && itemForm.get('status')?.touched}">
        <option value="">{{formModel.status}}</option>
        <option value="AVAILABLE">Available</option>
        <option value="UNAVAILABLE">Unavailable</option>
      </select>
      <div *ngIf="itemForm.get('status')?.invalid && itemForm.get('status')?.touched" class="invalid-feedback">
        Status is required.
      </div>
    </div>



    <div class="form-group">
      <label for="category">Category</label>
      <select id="category" formControlName="category" class="form-control"
        [ngClass]="{'is-invalid':itemForm.get('category')?.invalid && itemForm.get('category')?.touched}">
        <option value="">{{formModel.category}}</option>
        <option *ngFor="let category of categoryList" [value]="category.id">{{ category.name }}</option>
      </select>
      <div *ngIf="itemForm.get('category')?.invalid && itemForm.get('category')?.touched" class="invalid-feedback">
        Category is required.
      </div>
    </div>
    <br><br>

    <div class="form-group">
      <label for="manufactureYear">Manufacture Year</label>
      <input id="manufactureYear" formControlName="manufactureYear" class="form-control" type="number"
        [ngClass]="{'is-invalid': itemForm.get('manufactureYear')?.invalid && itemForm.get('manufactureYear')?.touched}" />
      <div *ngIf="itemForm.get('manufactureYear')?.invalid && itemForm.get('manufactureYear')?.touched"
        class="invalid-feedback">
        Please enter a valid year.
      </div>
    </div>

    <div class="form-group">
      <label for="registrationNumber">Registration Number</label>
      <input id="registrationNumber" formControlName="registrationNumber" class="form-control"
        [ngClass]="{'is-invalid': itemForm.get('registrationNumber')?.invalid && itemForm.get('registrationNumber')?.touched}" />
      <div *ngIf="itemForm.get('registrationNumber')?.invalid && itemForm.get('registrationNumber')?.touched"
        class="invalid-feedback">
        Please enter a valid registration number.
      </div>
    </div>

    <div class="form-group">
      <label for="rentalRatePerDay">Rental Rate </label>
      <input id="rentalRatePerDay" formControlName="rentalRatePerDay" class="form-control"
        [ngClass]="{'is-invalid': itemForm.get('rentalRatePerDay')?.invalid && itemForm.get('rentalRatePerDay')?.touched}" />
      <div *ngIf="itemForm.get('rentalRatePerDay')?.invalid && itemForm.get('rentalRatePerDay')?.touched"
        class="invalid-feedback">
        RentalRatePerDay is required.
      </div>
    </div>

    <button type="submit" class="btn btn-primary" [disabled]="itemForm.invalid">
      {{ updateId ? 'Update Car' : 'Add Car' }}
    </button>

  <!-- Car List -->

  <h5>Submitted Car Details:</h5>
  <table class="table table-bordered">
    <thead>
      <tr>
        <th>Make</th>
        <th>Model</th>
        <th>Status</th>
        <th>Category</th>
        <th>Manufacture Year</th>
        <th>Registration Number</th>
        <th>Rental Rate Per Day</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let submittedData of carList">
        <td>{{ submittedData.make }}</td>
        <td>{{ submittedData.model}}</td>
        <td>{{ submittedData.status }}</td>
        <td>{{ submittedData.category.name }}</td>
        <td>{{ submittedData.manufactureYear }}</td>
        <td>{{ submittedData.registrationNumber }}</td>
        <td>{{ submittedData.rentalRatePerDay }}</td>
        <td>
          <button (click)="editCar(submittedData)">Edit</button>
      </td>
      </tr>
    </tbody>
  </table>
</form>
</div>