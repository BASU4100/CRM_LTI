<div class="container">
  <!-- Success/Error Messages -->
  <!-- <div *ngIf="showMessage" class="alert alert-success">{{ responseMessage }}</div>
  <div *ngIf="showError" class="alert alert-danger">{{ errorMessage }}</div> -->

  <!-- Car Form -->
  <form [formGroup]="itemForm" (ngSubmit)="onSubmit()">
    <div class="form-group">
      <label for="model">Model</label>
      <input
        id="model"
        formControlName="model"
        class="form-control"
        [ngClass]="{'is-invalid': itemForm.get('model')?.invalid && itemForm.get('model')?.touched}"
      />
      <div *ngIf="itemForm.get('model')?.invalid && itemForm.get('model')?.touched" class="invalid-feedback">
        Model is required and must be at least 2 characters.
      </div>
    </div>

    <div class="form-group">
      <label for="status">Status</label>
      <select id="status" formControlName="status" class="form-control">
        <option value="AVAILABLE">Available</option>
        <option value="UNAVAILABLE">Unavailable</option>
      </select>
    </div>

    <div class="form-group">
      <label for="category">Category</label>
      <select id="category" formControlName="category" class="form-control">
        <option *ngFor="let category of categoryList" [value]="category">{{ category }}</option>
      </select>
      <div *ngIf="itemForm.get('category')?.invalid && itemForm.get('category')?.touched" class="invalid-feedback">
        Category is required.
      </div>
    </div>

    <div class="form-group">
      <label for="manufactureYear">Manufacture Year</label>
      <input
        id="manufactureYear"
        formControlName="manufactureYear"
        class="form-control"
        type="number"
        [ngClass]="{'is-invalid': itemForm.get('manufactureYear')?.invalid && itemForm.get('manufactureYear')?.touched}"
      />
      <div *ngIf="itemForm.get('manufactureYear')?.invalid && itemForm.get('manufactureYear')?.touched" class="invalid-feedback">
        Please enter a valid year.
      </div>
    </div>

    <div class="form-group">
      <label for="registrationNumber">Registration Number</label>
      <input
        id="registrationNumber"
        formControlName="registrationNumber"
        class="form-control"
        [ngClass]="{'is-invalid': itemForm.get('registrationNumber')?.invalid && itemForm.get('registrationNumber')?.touched}"
      />
      <div *ngIf="itemForm.get('registrationNumber')?.invalid && itemForm.get('registrationNumber')?.touched" class="invalid-feedback">
        Please enter a valid registration number.
      </div>
    </div>

    <button type="submit" class="btn btn-primary" [disabled]="itemForm.invalid">
      {{ updateId ? 'Update Car' : 'Add Car' }}
    </button>
  </form>

  <!-- Car List -->
  <h3 class="mt-4">Car List</h3>
  <table class="table table-bordered">
    <thead>
      <tr>
        <th>ID</th>
        <th>Model</th>
        <th>Status</th>
        <th>Category</th>
        <th>Manufacture Year</th>
        <th>Registration Number</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let car of carList">
        <td>{{ car.id }}</td>
        <td>{{ car.model }}</td>
        <td>{{ car.status }}</td>
        <td>{{ car.category }}</td>
        <td>{{ car.manufactureYear }}</td>
        <td>{{ car.registrationNumber }}</td>
        <td>
          <button class="btn btn-sm btn-warning" (click)="editCar(car)">Edit</button>
        </td>
      </tr>
    </tbody>
  </table>
</div>