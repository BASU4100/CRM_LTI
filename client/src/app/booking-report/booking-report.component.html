<mat-card class="mat-elevation-z4 full-height">
  <mat-card-title class="mat-headline mb-2 text-center">Booking Report</mat-card-title>

  <!-- Error Message -->
  <mat-card *ngIf="showError" class="mat-elevation-z2"
    style="background-color: #ffebee; color: #c62828; padding: 1rem;">
    {{ errorMessage }}
  </mat-card>

  <!-- Success Message -->
  <mat-card *ngIf="showMessage" class="mat-elevation-z2"
    style="background-color: #e8f5e9; color: #2e7d32; padding: 1rem;">
    {{ responseMessage }}
  </mat-card>

  <!-- Filter Form -->
  <form [formGroup]="filterForm" class="filter-form">
    <mat-form-field appearance="outline">
      <mat-label>Filter by Customer Name</mat-label>
      <input matInput formControlName="customerName" />
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Filter by Car Model</mat-label>
      <input matInput formControlName="carModel" />
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Filter by Status</mat-label>
      <input matInput formControlName="status" />
    </mat-form-field>
  </form>

  <!-- Booking Report Table -->
  <div class="table-container">
    <table mat-table [dataSource]="dataSource" matSort class="mat-elevation-z2" style="width: 100%; overflow: hidden;">

      <!-- Car Make Column -->
      <ng-container matColumnDef="carMake">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Car Make </th>
        <td mat-cell *matCellDef="let booking"> {{ booking.car.make }} </td>
      </ng-container>

      <!-- Car Model Column -->
      <ng-container matColumnDef="carModel">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Car Model </th>
        <td mat-cell *matCellDef="let booking"> {{ booking.car.model }} </td>
      </ng-container>

      <!-- Customer Name Column -->
      <ng-container matColumnDef="customerName">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Customer Name </th>
        <td mat-cell *matCellDef="let booking"> {{ booking.user.username }} </td>
      </ng-container>

      <!-- Rental Start Date Column -->
      <ng-container matColumnDef="rentalStartDate">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Rental Start Date </th>
        <td mat-cell *matCellDef="let booking"> {{ booking.rentalStartDate | date: 'mediumDate' }} </td>
      </ng-container>

      <!-- Rental End Date Column -->
      <ng-container matColumnDef="rentalEndDate">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Rental End Date </th>
        <td mat-cell *matCellDef="let booking"> {{ booking.rentalEndDate | date: 'mediumDate' }} </td>
      </ng-container>

      <!-- Status Column -->
      <ng-container matColumnDef="status">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Status </th>
        <td mat-cell *matCellDef="let booking"> {{ booking.status }} </td>
      </ng-container>

      <!-- Payment Status Column -->
      <ng-container matColumnDef="paymentStatus">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Payment Status </th>
        <td mat-cell *matCellDef="let booking"> {{ booking.paymentStatus }} </td>
      </ng-container>

      <!-- Header and Row Definitions -->
      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

      <!-- No records -->
      <tr *matNoDataRow>
        <td colspan="7" class="text-center py-3">
          <mat-icon class="text-muted">search_off</mat-icon>
          <p class="mat-body-1">No payment records found</p>
        </td>
      </tr>
    </table>
  </div>

  <!-- Paginator -->
  <mat-paginator [pageSizeOptions]="[5, 10, 25]" showFirstLastButtons></mat-paginator>
  
</mat-card>