<div class="container my-5 p-4 rounded shadow-lg custom-container">
  <h2 class="text-center mb-4 text-orange">Manage Category</h2>

  <!-- Success/Error Messages -->
  <div *ngIf="showMessage" class="alert alert-success">{{ responseMessage }}</div>
  <div *ngIf="showError" class="alert alert-danger">{{ errorMessage }}</div>

  <!-- Category Form -->
  <form [formGroup]="itemForm" (ngSubmit)="onSubmit()">
    <div class="row g-3">
      <!-- Category Name -->
      <div class="col-md-6">
        <label for="name" class="form-label">Category Name</label>
        <input id="name" type="text" formControlName="name" class="form-control"
          [ngClass]="{'is-invalid': itemForm.get('name')?.invalid && itemForm.get('name')?.touched}" />
        <div *ngIf="itemForm.get('name')?.hasError('required') && itemForm.get('name')?.touched" class="invalid-feedback">
          Name is required.
        </div>
        <div *ngIf="itemForm.get('name')?.hasError('minlength') && itemForm.get('name')?.touched" class="invalid-feedback">
          Name must be at least 3 characters long.
        </div>
      </div>

      <!-- Description -->
      <div class="col-md-6">
        <label for="description" class="form-label">Description</label>
        <input id="description" type="text" formControlName="description" class="form-control"
          [ngClass]="{'is-invalid': itemForm.get('description')?.invalid && itemForm.get('description')?.touched}" />
        <div *ngIf="itemForm.get('description')?.invalid && itemForm.get('description')?.touched" class="invalid-feedback">
          Description is required.
        </div>
      </div>

      <!-- Base Rate -->
      <div class="col-md-6">
        <label for="baseRate" class="form-label">Base Rate</label>
        <input id="baseRate" type="number" formControlName="baseRate" class="form-control"
          [ngClass]="{'is-invalid': itemForm.get('baseRate')?.invalid && itemForm.get('baseRate')?.touched}" />
        <div *ngIf="itemForm.get('baseRate')?.hasError('required') && itemForm.get('baseRate')?.touched" class="invalid-feedback">
          Base rate is required.
        </div>
        <div *ngIf="itemForm.get('baseRate')?.hasError('pattern') && itemForm.get('baseRate')?.touched" class="invalid-feedback">
          Base rate must be a valid number.
        </div>
        <div *ngIf="itemForm.get('baseRate')?.hasError('min') && itemForm.get('baseRate')?.touched" class="invalid-feedback">
          Base rate must be at least 2000.
        </div>
      </div>
    </div>

    <!-- Submit Button -->
    <div class="mt-4">
      <button type="submit" class="btn btn-secondary flex-fill" [disabled]="itemForm.invalid">
        {{ updateId ? 'Update Category' : 'Submit' }}
      </button>
        <button type="button" *ngIf="updateId" class="btn btn-secondary flex-fill" (click)="onCancel()">
          Cancel
        </button>
      
      
    </div>
  </form>

  <!-- Category List -->
  <hr class="my-4" />
  <div class="table-responsive">
    <table class="table table-bordered table-hover">
      <thead class="table-orange text-white">
        <tr>
          <th>Name</th>
          <th>Description</th>
          <th>Base Rate</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let category of categoryList">
          <td>{{ category.name }}</td>
          <td>{{ category.description }}</td>
          <td>{{ category.baseRate }}</td>
          <td>
            <button class="btn btn-sm btn-outline-dark" (click)="edit(category)">Edit</button>
            <button class="btn btn-sm btn-outline-danger" (click)="deleteCategory(category.id)">Delete</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

